<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · NetCDFTools.jl</title><meta name="title" content="Introduction · NetCDFTools.jl"/><meta property="og:title" content="Introduction · NetCDFTools.jl"/><meta property="twitter:title" content="Introduction · NetCDFTools.jl"/><meta name="description" content="Documentation for NetCDFTools.jl."/><meta property="og:description" content="Documentation for NetCDFTools.jl."/><meta property="twitter:description" content="Documentation for NetCDFTools.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>NetCDFTools.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Utilities"><span>Utilities</span></a></li><li><a class="tocitem" href="#CMIP-functions"><span>CMIP functions</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jl-spatial/NetCDFTools.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="NetCDFTools.jl"><a class="docs-heading-anchor" href="#NetCDFTools.jl">NetCDFTools.jl</a><a id="NetCDFTools.jl-1"></a><a class="docs-heading-anchor-permalink" href="#NetCDFTools.jl" title="Permalink"></a></h1><p>Documentation for NetCDFTools.jl, a Julia package for loading/writing NetCDF data on  the top of <code>NCDatasets.jl</code>.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Inside the Julia shell, you can download and install using the following commands:</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;NetCDFTools&quot;)</code></pre><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_open" href="#NetCDFTools.nc_open"><code>NetCDFTools.nc_open</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">open netcdf file, `nc_open` is alias of `NCDataset`</code></pre><pre><code class="language-julia hljs">nc_open(
    f::Union{AbstractString, Vector{&lt;:AbstractString}},
    args...;
    kwargs...
) -&gt; Any
</code></pre><p><strong>Arguments</strong></p><ul><li><p><code>mode</code>:</p><ul><li>&quot;a&quot;: append</li><li>&quot;c&quot;: create</li></ul></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">nc_open(f, args; kwargs...)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/nc_info.jl#L23"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/nc_info.jl:23</code></a>.</p><p>@seealso [NCDatasets.NCDataset()]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/nc_info.jl#L5-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_cellsize" href="#NetCDFTools.nc_cellsize"><code>NetCDFTools.nc_cellsize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nc_cellsize(ds::NCdata)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/nc_dim.jl#L119-L121">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.getindex" href="#Base.getindex"><code>Base.getindex</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getindex(
    dims::Vector{NcDim},
    name::Union{Regex, AbstractString}
) -&gt; Any
</code></pre><p><strong>Examples</strong></p><pre><code class="language-julia hljs">f = &quot;test/data/temp_HI.nc&quot;
dims = nc_dims(f)
dims[[&quot;lon&quot;, &quot;lat&quot;]]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/nc_dim.jl#L35-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.NcDim" href="#NetCDFTools.NcDim"><code>NetCDFTools.NcDim</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NcDim(name::AbstractString, vals::AbstractArray, atts::Dict = Dict())</code></pre><p>Represents a NetCDF dimension of name <code>name</code> optionally holding the dimension values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/nc_dim.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.ncdim_def" href="#NetCDFTools.ncdim_def"><code>NetCDFTools.ncdim_def</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ncdim_def(ds, name, val, attrib = Dict())
ncdim_def(ds, dim::NcDim)
ncdim_def(ds, dims::Vector{NcDim})</code></pre><p><strong>Examples</strong></p><pre><code class="language-julia hljs">## 1. by existing nc file
# f = &quot;/mnt/j/Researches/Obs/Obs_ChinaHW_cluster/ncell_16/clusterId_HItasmax_movTRS_Obs.nc&quot;
dims = nc_dims(f)
ds = nc_open(&quot;f2.nc&quot;, &quot;c&quot;)
ncdim_def(ds, dims);
println(ds)
close(ds)

## 2. by assigned variables
# dates = nc_date(ds)
ds = nc_open(&quot;f3.nc&quot;, &quot;c&quot;)
dim_t = NcDim_time(dates)
ncdim_def(ds, dim_t)
close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/ncdim_def.jl#L28-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.make_dims" href="#NetCDFTools.make_dims"><code>NetCDFTools.make_dims</code></a> — <span class="docstring-category">Function</span></header><section><div><p>make_dims(range=[70, 140, 15, 55], cellsize = 0.5, dates)</p><pre><code class="language-julia hljs">make_dims(range, cellsize, dates)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/ncdim_def.jl#L16"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/ncdim_def.jl:16</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/ncdim_def.jl#L11-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.ncvar_def" href="#NetCDFTools.ncvar_def"><code>NetCDFTools.ncvar_def</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ncvar_def(ds, name, val, dims::Vector{&lt;:AbstractString}, attrib = Dict();
    compress = 1, kwargs...)
ncvar_def(ds, name, val, dims::NcDim, attrib = Dict();
    compress = 1, kwargs...)</code></pre><p><strong>Arguments</strong></p><ul><li><p><code>val</code>: can be <code>data</code> or vtype</p></li><li><p><code>compress</code>: Compression level: 0 (default) means no compression and 9 means   maximum compression. Each chunk will be compressed individually.</p></li><li><p><code>type</code>: which type to save? Julia variable types (not string), e.g., <code>Float32</code>.</p></li><li><p><code>options</code>: Dictionary object, </p><ul><li><p><code>fillvalue</code>: A value filled in the NetCDF file to indicate missing data.   It will be stored in the _FillValue attribute.</p></li><li><p><code>chunksizes</code>: Vector integers setting the chunk size. The total size of a   chunk must be less than 4 GiB. </p></li><li><p><code>shuffle</code>: If true, the shuffle filter is activated which can improve the   compression ratio.</p></li><li><p><code>checksum</code>: The checksum method can be :fletcher32 or :nochecksum   (checksumming is disabled, which is the default)</p></li><li><p><code>attrib</code>: An iterable of attribute name and attribute value pairs, for   example a Dict, DataStructures.OrderedDict or simply a vector of pairs   (see example below)</p></li></ul></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">f = &quot;f1.nc&quot;
isfile(f) &amp;&amp; rm(f)
ds = nc_open(f, &quot;c&quot;)
compress = 1

ncdim_def(ds, &quot;lon&quot;, lon, Dict(&quot;longname&quot; =&gt; &quot;Longitude&quot;, &quot;units&quot; =&gt; &quot;degrees east&quot;))
ncdim_def(ds, &quot;lat&quot;, lat, Dict(&quot;longname&quot; =&gt; &quot;Latitude&quot;, &quot;units&quot; =&gt; &quot;degrees north&quot;))
ncdim_def(ds, &quot;time&quot;, 1:ntime)

ncvar_def(ds, &quot;HI&quot;, dat, [&quot;lon&quot;, &quot;lat&quot;, &quot;time&quot;], Dict(&quot;longname&quot; =&gt; &quot;hello&quot;); compress = compress)
close(ds)

# append a variable
ds = nc_open(f, &quot;a&quot;)
ncvar_def(ds, &quot;HI2&quot;, dat, [&quot;lon&quot;, &quot;lat&quot;, &quot;time&quot;]; compress = compress)
print(ds)
close(ds)

nc_info(f)</code></pre><p>@seealso <a href="#NetCDFTools.ncdim_def"><code>ncdim_def</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/ncvar_def.jl#L1-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.ncatt_put" href="#NetCDFTools.ncatt_put"><code>NetCDFTools.ncatt_put</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">ncatt_get(f::NCfiles, key)
ncatt_put(f::AbstractString, attrib = Dict())
ncatt_del(f::AbstractString, keys::Vector{&lt;:AbstractString})</code></pre><p>add or delete global attributes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/ncatt_put.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_read" href="#NetCDFTools.nc_read"><code>NetCDFTools.nc_read</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nc_read(file) -&gt; Any
nc_read(
    file,
    band;
    type,
    period,
    ind,
    raw,
    nodata,
    verbose
) -&gt; Any
</code></pre><p><strong>Arguments</strong></p><ul><li><p><code>band</code>  : string (variable name) or int (band id). If <code>int</code> provided,            <code>bandName = nc_bands(file)[band]</code></p></li><li><p><code>type</code>  : returned data type, e.g. <code>Float32</code></p></li><li><p><code>period</code>: <code>[year_start, year_end]</code> or <code>year</code>, time should be in the 3rd dimension.</p></li><li><p><code>ind</code>   : If <code>ind</code> provided, <code>period</code> will be ignored.</p></li><li><p><code>raw</code>   : Boolean. </p><ul><li><code>true</code>: raw data.</li><li><code>false</code> (default): <code>missing</code> will be replaced with <code>nodata</code></li></ul></li><li><p><code>verbose</code>: Boolean. It <code>true</code>, <code>data</code> and <code>ind</code> will be printed on the console.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/nc_read.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_write" href="#NetCDFTools.nc_write"><code>NetCDFTools.nc_write</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nc_write(
    f::AbstractString,
    varname::AbstractString,
    val,
    dims::Vector{NcDim}
) -&gt; Any
nc_write(
    f::AbstractString,
    varname::AbstractString,
    val,
    dims::Vector{NcDim},
    attrib::Dict;
    compress,
    overwrite,
    mode,
    global_attrib,
    kw...
) -&gt; Any
</code></pre><p><strong>Arguments</strong></p><ul><li><p>attrib: An iterable of attribute name and attribute value pairs, for example a Dict, DataStructures.OrderedDict or simply a vector of pairs (see example below)</p></li><li><p><code>type</code>: which type to save? Julia variable types.</p></li><li><p><code>kwargs</code>: Parameters passed to <code>ncvar_def</code>, and further to  [<code>NCDatasets.defVar</code>]. For examples:</p><ul><li><p>fillvalue: A value filled in the NetCDF file to indicate missing data. It  will be stored in the _FillValue attribute.</p></li><li><p>chunksizes: Vector integers setting the chunk size. The total size of a  chunk must be less than 4 GiB.</p></li><li><p>shuffle: If true, the shuffle filter is activated which can improve the  compression ratio.</p></li><li><p>checksum: The checksum method can be :fletcher32 or :nochecksum  (checksumming is disabled, which is the default)</p></li></ul></li><li><p><code>mode</code>(not used): one of &quot;r&quot;, &quot;c&quot;, &quot;w&quot;, see [NCDatasets.nc_open()] for details</p></li></ul><p><strong>Examples:</strong></p><pre><code class="language-julia hljs">dims = [
    NcDim(&quot;lon&quot;, lon, Dict(&quot;longname&quot; =&gt; &quot;Longitude&quot;, &quot;units&quot; =&gt; &quot;degrees east&quot;))
    NcDim(&quot;lat&quot;, lat, Dict(&quot;longname&quot; =&gt; &quot;Latitude&quot;, &quot;units&quot; =&gt; &quot;degrees north&quot;))
    NcDim_time(dates)
]
dims = make_dims(range, cellsize, dates) # another option

nc_write(f, varname, val, dims)</code></pre><pre><code class="language-julia hljs">nc_write(f, varname, val, dims)
nc_write(
    f,
    varname,
    val,
    dims,
    attrib;
    compress,
    overwrite,
    mode,
    global_attrib,
    kw...
)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/nc_write.jl#L45"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/nc_write.jl:45</code></a>.</p><p>@seealso <code>ncvar_def</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/nc_write.jl#L1-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_write!" href="#NetCDFTools.nc_write!"><code>NetCDFTools.nc_write!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nc_write!(
    f::AbstractString,
    varname::AbstractString,
    val,
    dims::Vector{&lt;:Union{AbstractString, NcDim}}
) -&gt; Any
nc_write!(
    f::AbstractString,
    varname::AbstractString,
    val,
    dims::Vector{&lt;:Union{AbstractString, NcDim}},
    attrib::Dict;
    compress,
    kw...
) -&gt; Any
</code></pre><pre><code class="language-julia hljs">nc_write!(f, varname, val, dims)
nc_write!(f, varname, val, dims, attrib; compress, kw...)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/nc_write.jl#L85"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/nc_write.jl:85</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/nc_write.jl#L80">source</a></section><section><div><pre><code class="language-julia hljs">nc_write!(
    val::AbstractArray,
    f::AbstractString,
    dims::Vector{&lt;:Union{AbstractString, NcDim}}
) -&gt; Any
nc_write!(
    val::AbstractArray,
    f::AbstractString,
    dims::Vector{&lt;:Union{AbstractString, NcDim}},
    attrib;
    varname,
    kw...
) -&gt; Any
</code></pre><pre><code class="language-julia hljs">nc_write!(val, f, dims)
nc_write!(val, f, dims, attrib; varname, kw...)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/nc_write.jl#L100"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/nc_write.jl:100</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/nc_write.jl#L95">source</a></section></article><h2 id="Utilities"><a class="docs-heading-anchor" href="#Utilities">Utilities</a><a id="Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.QDM" href="#NetCDFTools.QDM"><code>NetCDFTools.QDM</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">QDM(
    y_obs::AbstractArray{T&lt;:Real, 1},
    y_calib::AbstractArray{T&lt;:Real, 1},
    y_pred::AbstractArray{T&lt;:Real, 1};
    type_adj,
    kw...
) -&gt; Any
</code></pre><p><strong>Arguments</strong></p><ul><li><p><code>type_adj</code>: </p><ul><li><code>add</code>: 高斯分布的变量，如Tair</li><li><code>mul</code>: 降水</li></ul></li></ul><p><strong>Notes</strong></p><p>QDM: 需要使用一个滑动窗口。</p><ul><li><p><code>ClimDown</code>使用的是10年的窗口，一次处理10年；</p></li><li><p><code>climQMBC</code>使用的是<code>nobs</code>的窗口，一次处理1年。</p></li></ul><p><strong>References</strong></p><ol><li><p>Cannon, A. J., Sobie, S. R., &amp; Murdock, T. Q. (2015). Bias Correction of GCM Precipitation by Quantile Mapping: How Well Do Methods Preserve Changes in Quantiles and Extremes? Journal of Climate, 28(17), 6938–6959. https://doi.org/10.1175/JCLI-D-14-00754.1</p></li><li><p>https://github.com/pacificclimate/ClimDown/blob/master/R/QDM.R#L126</p></li><li><p>https://github.com/rpkgs/climQMBC/blob/master/R/map_QDM.R#L43</p></li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/BiasCorrection/QDM.jl#L14-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.bilinear" href="#NetCDFTools.bilinear"><code>NetCDFTools.bilinear</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">bilinear(
    x,
    y,
    z::AbstractArray{T&lt;:Real, 3},
    xx,
    yy;
    na_rm
) -&gt; Any
</code></pre><p>Suppose that the location, (locx, locy) lies in between the first two grid points in both x an y. That is locx is between x1 and x2 and locy is between y1 and y2. Let <code>ex= (l1-x1)/(x2-x1)</code> <code>ey= (l2-y1)/(y2-y1)</code>. The interpolant is</p><p>( 1-ex)(1-ey)<em>z11 + (1- ex)(ey)</em>z12 + ( ex)(1-ey)<em>z21 + ( ex)(ey)</em>z22</p><p>Where the z&#39;s are the corresponding elements of the Z matrix.</p><pre><code class="language-julia hljs">bilinear(x, y, z, xx, yy; na_rm)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/Interpolation/bilinear.jl#L30"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/Interpolation/bilinear.jl:30</code></a>.</p><p><strong>References</strong></p><ol><li><p>https://github.com/cran/fields/blob/master/R/interp.surface.R</p></li><li><p>https://en.wikipedia.org/wiki/Bilinear_interpolation</p></li></ol><p><strong>Examples</strong></p><pre><code class="language-jldoc hljs">lon = 70:5:140
lat = 15:5:55

Lon = 70:2.5:140
Lat = 15:2.5:55
Z = rand(T, length(lon), length(lat), 2)
r = bilinear(lon, lat, Z, Lon, Lat; na_rm=true)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/Interpolation/bilinear.jl#L1-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_aggregate" href="#NetCDFTools.nc_aggregate"><code>NetCDFTools.nc_aggregate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nc_aggregate(
    f::AbstractString
) -&gt; Union{Nothing, NCDatasets.NCDataset}
nc_aggregate(
    f::AbstractString,
    fout;
    by,
    fun,
    outdir,
    overwrite,
    verbose
) -&gt; Union{Nothing, NCDatasets.NCDataset}
</code></pre><p><strong>Arguments</strong></p><ul><li><code>f</code>: input file</li><li><code>fout</code>: output file</li><li><code>by</code>: &quot;year&quot; or &quot;month&quot;, or a function to group dates</li></ul><pre><code class="language-julia hljs">nc_aggregate(f)
nc_aggregate(f, fout; by, fun, outdir, overwrite, verbose)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/utilize/nc_aggregate.jl#L11"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/utilize/nc_aggregate.jl:11</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/utilize/nc_aggregate.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_aggregate_dir" href="#NetCDFTools.nc_aggregate_dir"><code>NetCDFTools.nc_aggregate_dir</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nc_aggregate_dir(indir; by, replacement, outdir, kw...)
</code></pre><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">scenario = &quot;historical&quot;
indir = &quot;Z:/ChinaHW/CMIP6_cluster_HItasmax_adjchunk/HI_tasmax/historical&quot;
outdir = &quot;Z:/ChinaHW/CMIP6_cluster_HItasmax_adjchunk/HI_tasmax_year/historical&quot;

nc_aggregate_dir(indir; by=&quot;year&quot;, outdir)</code></pre><pre><code class="language-julia hljs">nc_aggregate_dir(indir; by, replacement, outdir, kw...)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/utilize/nc_aggregate.jl#L66"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/utilize/nc_aggregate.jl:66</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/utilize/nc_aggregate.jl#L51-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_combine" href="#NetCDFTools.nc_combine"><code>NetCDFTools.nc_combine</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nc_combine(
    d::DataFrames.AbstractDataFrame;
    outdir,
    overwrite,
    kw...
) -&gt; Union{Nothing, NCDatasets.NCDataset{Nothing}}
</code></pre><pre><code class="language-julia hljs">nc_combine(d; outdir, overwrite, kw...)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/utilize/nc_combine.jl#L54"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/utilize/nc_combine.jl:54</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/utilize/nc_combine.jl#L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.nc_subset" href="#NetCDFTools.nc_subset"><code>NetCDFTools.nc_subset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">nc_subset(
    f,
    range::Vector
) -&gt; Union{Nothing, NCDatasets.NCDataset{Nothing}}
nc_subset(
    f,
    range::Vector,
    fout;
    delta,
    check_vals,
    verbose,
    big,
    plevs,
    band,
    outdir,
    overwrite
) -&gt; Any
</code></pre><p><strong>Arguments</strong></p><ul><li><code>check_vals</code>: If download failed, <code>length(unique(vals)) = 1</code>. Default check the length of data unique values</li></ul><p><strong>Note</strong></p><p>! 目前只保存其中一个变量</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># 4-d array
url = &quot;http://esgf3.dkrz.de/thredds/dodsC/cmip6/CMIP/CSIRO-ARCCSS/ACCESS-CM2/historical/r1i1p1f1/day/zg/gn/v20191108/zg_day_ACCESS-CM2_historical_r1i1p1f1_gn_19500101-19541231.nc&quot;

nc_open(url)

# 3-d array
url = &quot;http://esgf-data04.diasjp.net/thredds/dodsC/esg_dataroot/CMIP6/CMIP/CSIRO-ARCCSS/ACCESS-CM2/historical/r1i1p1f1/day/huss/gn/v20191108/huss_day_ACCESS-CM2_historical_r1i1p1f1_gn_18500101-18991231.nc&quot;

range = [70, 140, 15, 55]
delta = 5

@time nc_subset(url, range)</code></pre><pre><code class="language-julia hljs">nc_subset(f, range)
nc_subset(
    f,
    range,
    fout;
    delta,
    check_vals,
    verbose,
    big,
    plevs,
    band,
    outdir,
    overwrite
)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/utilize/nc_subset.jl#L32"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/utilize/nc_subset.jl:32</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/utilize/nc_subset.jl#L1-L31">source</a></section></article><h2 id="CMIP-functions"><a class="docs-heading-anchor" href="#CMIP-functions">CMIP functions</a><a id="CMIP-functions-1"></a><a class="docs-heading-anchor-permalink" href="#CMIP-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.CMIP.Tem_F2C" href="#NetCDFTools.CMIP.Tem_F2C"><code>NetCDFTools.CMIP.Tem_F2C</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Tem_F2C(T_degF::Real)
Tem_C2F(T_degC::Real)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/CMIP/heat_index.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.CMIP.heat_index" href="#NetCDFTools.CMIP.heat_index"><code>NetCDFTools.CMIP.heat_index</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">heat_index(t::Union{&lt;:Real,Missing}, rh::Union{&lt;:Real,Missing})
heat_index(t::AbstractArray{T}, rh::AbstractArray{T}) where {T&lt;:Union{Missing,Real}}
heat_index(f_tair::AbstractString, f_rh::AbstractString, outfile::AbstractString;
    raw=true, offset = -273.15,
    varname=&quot;HI&quot;, type = Float32, compress=1, 
    overwrite=false)</code></pre><p><strong>Arguments</strong></p><ul><li><code>t</code>: degC</li><li><code>rh</code>: %</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">heat_index(f_tair, f_rh, outfile; overwrite = false, raw = true, compress = 1)</code></pre><p><strong>References</strong></p><ol><li>https://www.wpc.ncep.noaa.gov/html/heatindex_equationbody.html</li><li>Kong, D., Gu, X., Li, J., Ren, G., &amp; Liu, J. (2020). Contributions of Global   Warming and Urbanization to the Intensification of Human‐Perceived Heatwaves   Over China. Journal of Geophysical Research: Atmospheres, 125(18), 1–16.   https://doi.org/10.1029/2019JD032175.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/CMIP/heat_index.jl#L47-L70">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.CMIP.get_model" href="#NetCDFTools.CMIP.get_model"><code>NetCDFTools.CMIP.get_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_model(file; prefix = &quot;day_|mon_|year_&quot;, postfix = &quot;_hist|_ssp|_piControl&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/CMIP/CMIPFiles_info.jl#L8-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NetCDFTools.CMIP.CMIPFiles_info" href="#NetCDFTools.CMIP.CMIPFiles_info"><code>NetCDFTools.CMIP.CMIPFiles_info</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">CMIPFiles_info(
    files;
    detailed,
    include_year,
    include_nmiss
) -&gt; DataFrames.DataFrame
</code></pre><blockquote><p>Note: currently, only works for daily scale</p></blockquote><p><strong>Return</strong></p><ul><li><code>model</code>:</li><li><code>ensemble</code>:</li><li><code>date_begin</code>, <code>date_end</code>:</li><li><code>file</code>:</li></ul><pre><code class="language-julia hljs">CMIPFiles_info(files; detailed, include_year, include_nmiss)</code></pre><p>defined at <a href="https://github.com/jl-spatial/NetCDFTools.jl/tree/6ccd243bf317d2ba82df3f9dfd5d048d645935d9//src/CMIP/CMIPFiles_info.jl#L82"><code>/home/runner/work/NetCDFTools.jl/NetCDFTools.jl/src/CMIP/CMIPFiles_info.jl:82</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">fs = [
  &quot;http://esgf-data04.diasjp.net/thredds/dodsC/esg_dataroot/CMIP6/CMIP/CSIRO-ARCCSS/ACCESS-CM2/historical/r1i1p1f1/day/huss/gn/v20191108/huss_day_ACCESS-CM2_historical_r1i1p1f1_gn_18500101-18991231.nc&quot;,
  &quot;http://esgf-data04.diasjp.net/thredds/dodsC/esg_dataroot/CMIP6/CMIP/CSIRO-ARCCSS/ACCESS-CM2/historical/r1i1p1f1/day/huss/gn/v20191108/huss_day_ACCESS-CM2_historical_r1i1p1f1_gn_19000101-19491231.nc&quot;,
  &quot;http://esgf-data04.diasjp.net/thredds/dodsC/esg_dataroot/CMIP6/CMIP/CSIRO-ARCCSS/ACCESS-CM2/historical/r1i1p1f1/day/huss/gn/v20191108/huss_day_ACCESS-CM2_historical_r1i1p1f1_gn_19500101-19991231.nc&quot;,
  &quot;http://esgf-data04.diasjp.net/thredds/dodsC/esg_dataroot/CMIP6/CMIP/CSIRO-ARCCSS/ACCESS-CM2/historical/r1i1p1f1/day/huss/gn/v20191108/huss_day_ACCESS-CM2_historical_r1i1p1f1_gn_20000101-20141231.nc&quot;,
  &quot;http://esgf-data04.diasjp.net/thredds/dodsC/esg_dataroot/CMIP6/ScenarioMIP/CSIRO-ARCCSS/ACCESS-CM2/ssp126/r1i1p1f1/day/huss/gn/v20210317/huss_day_ACCESS-CM2_ssp126_r1i1p1f1_gn_20150101-20641231.nc&quot;,
  &quot;http://esgf-data04.diasjp.net/thredds/dodsC/esg_dataroot/CMIP6/ScenarioMIP/CSIRO-ARCCSS/ACCESS-CM2/ssp126/r1i1p1f1/day/huss/gn/v20210317/huss_day_ACCESS-CM2_ssp126_r1i1p1f1_gn_20650101-21001231.nc&quot;
]
info = CMIP.CMIPFiles_info(fs; detailed=false)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jl-spatial/NetCDFTools.jl/blob/6ccd243bf317d2ba82df3f9dfd5d048d645935d9/src/CMIP/CMIPFiles_info.jl#L56-L81">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Friday 6 October 2023 07:19">Friday 6 October 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
